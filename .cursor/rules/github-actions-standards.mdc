---
globs: .github/workflows/*.yml,.github/workflows/*.yaml
---
# GitHub Actions Workflow Standards

## Workflow Naming

Always include an emoji icon in the workflow name for better visibility in the Actions tab:

```yaml
name: ğŸ³ PlatformIO Docker Image
```

### Recommended Workflow Name Icons

| Icon | Use Case |
|------|----------|
| ğŸ³ | Docker builds |
| ğŸ”§ | Build/compile workflows |
| ğŸ§ª | Testing workflows |
| ğŸ“¦ | Package/release workflows |
| ğŸš€ | Deployment workflows |
| ğŸ” | Linting/code quality |
| ğŸ“Š | Analysis/reporting |
| ğŸ›¡ï¸ | Security scanning |
| â™»ï¸ | Scheduled maintenance |

## Step Icons

Add emoji icons to step names for improved readability and visual scanning:

### Common Step Icons

| Icon | Step Purpose | Example |
|------|--------------|---------|
| ğŸ“¥ | Checkout code | `- name: ğŸ“¥ Checkout repository` |
| ğŸ”§ | Setup/configure tools | `- name: ğŸ”§ Set up Docker Buildx` |
| ğŸ” | Authentication | `- name: ğŸ” Log in to GitHub Container Registry` |
| ğŸ·ï¸ | Metadata/tags | `- name: ğŸ·ï¸ Extract metadata` |
| ğŸ¯ | Generate/process | `- name: ğŸ¯ Generate tags based on branch` |
| ğŸ’¾ | Cache operations | `- name: ğŸ’¾ Determine cache strategy` |
| ğŸ³ | Docker operations | `- name: ğŸ³ Build and push Docker image` |
| ğŸ“ | Install tools | `- name: ğŸ“ Install Cosign` |
| âœï¸ | Sign/verify | `- name: âœï¸ Sign the published Docker image` |
| ğŸ§ª | Run tests | `- name: ğŸ§ª Run unit tests` |
| ğŸ“Š | Reports | `- name: ğŸ“Š Generate coverage report` |
| ğŸ“¤ | Upload/publish | `- name: ğŸ“¤ Upload artifacts` |
| ğŸš€ | Deploy | `- name: ğŸš€ Deploy to production` |
| ğŸ” | Scan/lint | `- name: ğŸ” Lint code` |
| ğŸ›¡ï¸ | Security scan | `- name: ğŸ›¡ï¸ Run security scan` |
| âš™ï¸ | Configuration | `- name: âš™ï¸ Configure environment` |
| ğŸ”¨ | Build | `- name: ğŸ”¨ Build application` |
| ğŸ§¹ | Cleanup | `- name: ğŸ§¹ Clean up` |

## Example Workflow Structure

Reference: [.github/workflows/platformio.yml](mdc:.github/workflows/platformio.yml)

```yaml
name: ğŸ³ Docker Build Workflow

on:
  push:
    branches: [master, dev]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4
      
      - name: ğŸ”§ Set up Docker Buildx
        uses: docker/setup-buildx-action@v3
      
      - name: ğŸ” Log in to Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}
      
      - name: ğŸ³ Build and push Docker image
        uses: docker/build-push-action@v5
        with:
          push: true
          tags: ghcr.io/org/image:latest
```

## Benefits

âœ… **Visual Scanning** - Easy to identify steps at a glance
âœ… **Professional Appearance** - Modern, polished CI/CD workflows
âœ… **Better UX** - Improves readability in GitHub Actions UI
âœ… **Consistency** - Standardized icons across all workflows

## Guidelines

1. **Always use icons** for both workflow names and step names
2. **Be consistent** with icon meanings across workflows
3. **Choose meaningful icons** that represent the action being performed
4. **Keep it simple** - one icon per step name, at the beginning
5. **Don't overdo it** - use standard icons, avoid obscure emojis

## Per-Image Workflows

Each image should have its own workflow file:
- Naming: `.github/workflows/<image-name>.yml`
- Trigger: Only on changes to relevant files
- Name: Use descriptive icon (ğŸ³ for Docker images)
- Tags: Branch-based tagging strategy

## Workflow Organization

Keep workflows:
- **Focused** - One purpose per workflow
- **Documented** - Comments explaining complex logic
- **Optimized** - Use caching, conditional steps
- **Maintainable** - Clear step names with icons
