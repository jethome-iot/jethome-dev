---
globs: .github/workflows/*.yml,.github/workflows/*.yaml
---
# GitHub Actions Workflow Standards

## Workflow Naming

Always include an emoji icon in the workflow name for better visibility in the Actions tab:

```yaml
name: 🐳 PlatformIO Docker Image
```

### Recommended Workflow Name Icons

| Icon | Use Case |
|------|----------|
| 🐳 | Docker builds |
| 🔧 | Build/compile workflows |
| 🧪 | Testing workflows |
| 📦 | Package/release workflows |
| 🚀 | Deployment workflows |
| 🔍 | Linting/code quality |
| 📊 | Analysis/reporting |
| 🛡️ | Security scanning |
| ♻️ | Scheduled maintenance |

## Step Icons

Add emoji icons to step names for improved readability and visual scanning:

### Common Step Icons

| Icon | Step Purpose | Example |
|------|--------------|---------|
| 📥 | Checkout code | `- name: 📥 Checkout repository` |
| 🔧 | Setup/configure tools | `- name: 🔧 Set up Docker Buildx` |
| 🔐 | Authentication | `- name: 🔐 Log in to GitHub Container Registry` |
| 🏷️ | Metadata/tags | `- name: 🏷️ Extract metadata` |
| 🎯 | Generate/process | `- name: 🎯 Generate tags based on branch` |
| 💾 | Cache operations | `- name: 💾 Determine cache strategy` |
| 🐳 | Docker operations | `- name: 🐳 Build and push Docker image` |
| 📝 | Install tools | `- name: 📝 Install Cosign` |
| ✍️ | Sign/verify | `- name: ✍️ Sign the published Docker image` |
| 🧪 | Run tests | `- name: 🧪 Run unit tests` |
| 📊 | Reports | `- name: 📊 Generate coverage report` |
| 📤 | Upload/publish | `- name: 📤 Upload artifacts` |
| 🚀 | Deploy | `- name: 🚀 Deploy to production` |
| 🔍 | Scan/lint | `- name: 🔍 Lint code` |
| 🛡️ | Security scan | `- name: 🛡️ Run security scan` |
| ⚙️ | Configuration | `- name: ⚙️ Configure environment` |
| 🔨 | Build | `- name: 🔨 Build application` |
| 🧹 | Cleanup | `- name: 🧹 Clean up` |

## Example Workflow Structure

Reference: [.github/workflows/platformio.yml](mdc:.github/workflows/platformio.yml)

```yaml
name: 🐳 Docker Build Workflow

on:
  push:
    branches: [master, dev]
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
      - name: 📥 Checkout repository
        uses: actions/checkout@v4
      
      - name: 🔧 Set up Docker Buildx
        uses: docker/setup-buildx-action@v3
      
      - name: 🔐 Log in to Registry
        uses: docker/login-action@v3
        with:
          registry: ghcr.io
          username: ${{ github.actor }}
          password: ${{ secrets.GITHUB_TOKEN }}
      
      - name: 🐳 Build and push Docker image
        uses: docker/build-push-action@v5
        with:
          push: true
          tags: ghcr.io/org/image:latest
```

## Benefits

✅ **Visual Scanning** - Easy to identify steps at a glance
✅ **Professional Appearance** - Modern, polished CI/CD workflows
✅ **Better UX** - Improves readability in GitHub Actions UI
✅ **Consistency** - Standardized icons across all workflows

## Guidelines

1. **Always use icons** for both workflow names and step names
2. **Be consistent** with icon meanings across workflows
3. **Choose meaningful icons** that represent the action being performed
4. **Keep it simple** - one icon per step name, at the beginning
5. **Don't overdo it** - use standard icons, avoid obscure emojis

## Per-Image Workflows

Each image should have its own workflow file:
- Naming: `.github/workflows/<image-name>.yml`
- Trigger: Only on changes to relevant files
- Name: Use descriptive icon (🐳 for Docker images)
- Tags: Branch-based tagging strategy

## Workflow Organization

Keep workflows:
- **Focused** - One purpose per workflow
- **Documented** - Comments explaining complex logic
- **Optimized** - Use caching, conditional steps
- **Maintainable** - Clear step names with icons
